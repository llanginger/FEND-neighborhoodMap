function toggleBounce(){null!==marker.getAnimation()?marker.setAnimation(null):marker.setAnimation(google.maps.Animation.BOUNCE)}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:myLatLong,zoom:15}),infoWindow=new google.maps.InfoWindow}$(function(){$(".nav-toggle").on("click",function(){$(".wrapper").toggleClass("open")}),$("#display-random").on("click",function(){$(".wrapper").toggleClass("open")}),$("#main-button").on("click",function(){$(".default-slider").unslider()});var e=function(){var e=this;this.searchLocation=ko.observable("ballard, wa"),this.searchCategory=ko.observable("coffee"),this.resultName=ko.observable(),this.resultId=ko.observable(),this.resultLimit=ko.observable(10),this.fourSquareResults=ko.observableArray([]),this.fourSqPhotos=ko.observableArray([]),this.selectedItems=ko.observableArray([]),this.currentItem=ko.observable({}),this.fourSqSettings=ko.observable({baseUrl:"https://api.foursquare.com/v2/venues/",search:"search?",clientID:"client_id=WGMJMEF5PGBY0Z2VPGOTUV4IZWYTZS5V1E0TPIJHBSHRXNWS",clientSecret:"&client_secret=MPIRWAHDMNBZVY2LSAVR1Y0WLQEP5SLDQHIXJZLVFILJHJDQ",loc:"near="+e.searchLocation(),cat:"&query="+e.searchCategory(),limit:"&limit="+e.resultLimit()});var t=e.fourSqSettings().baseUrl+e.fourSqSettings().search+e.fourSqSettings().loc+"&"+e.fourSqSettings().clientID+e.fourSqSettings().clientSecret+"&v=20130815"+e.fourSqSettings().cat+e.fourSqSettings().limit,o=e.fourSqSettings().baseUrl+"40b3de00f964a52026001fe3/photos?"+e.fourSqSettings().clientID+e.fourSqSettings().clientSecret+"&v=20130815";this.removeSelected=function(){e.fourSquareResults.removeAll(e.selectedItems()),e.selectedItems([])},this.displayRandom=function(){var t=Math.floor(Math.random()*e.fourSquareResults().length),o="https://irs0.4sqi.net/img/general/300x200/2341723_vt1Kr-SfmRmdge-M7b4KNgX2_PHElyVbYL65pMnxEQw.jpg/";e.currentItem(e.fourSquareResults()[t]);var a=e.currentItem().lat,r=e.currentItem().lng;e.resultName(e.currentItem().name),e.resultId(e.currentItem().id),e.fourSqSettings().id=e.currentItem().id,myLatLong={lat:a,lng:r},map.panTo(myLatLong),marker?marker.setPosition(myLatLong):marker=new google.maps.Marker({map:map,title:"Ohai, a marker!",animation:google.maps.Animation.DROP}),infoWindow&&infoWindow.close(),infoWindow=new google.maps.InfoWindow({content:"<div id='content'><div class='default-slider'><ul><li><img src='photos/250.jpeg' /></li><li><img src='photos/287.jpg' /></li><li><img src='photos/300.jpeg' /></li></ul></div><h1 id='firstHeading' class='firstHeading'>"+e.resultName()+"</h1></div>"}),google.maps.event.addListener(marker,"position_changed",function(){console.log("Info Open"),console.log(marker.position),$(".default-slider").unslider({autoplay:!0,speed:1e3})}),marker.setPosition(myLatLong),infoWindow.open(map,marker,this),n(myLatLong,0,-150)};var n=function(e,t,o){var n=map.getProjection().fromLatLngToPoint(e instanceof google.maps.LatLng?e:map.getCenter()),a=new google.maps.Point(t/Math.pow(2,map.getZoom())||0,o/Math.pow(2,map.getZoom())||0);map.setCenter(map.getProjection().fromPointToLatLng(new google.maps.Point(n.x-a.x,n.y+a.y)))};this.fourSquareApiCall=function(){e.fourSquareResults([]),$.ajax(t).fail(function(e){console.log("Failed 4square request")}).done(function(t){var o=t.response.venues;for(var n in o)e.fourSquareResults.push({name:o[n].name,lat:o[n].location.lat,lng:o[n].location.lng,id:o[n].id})})}};ko.applyBindings(new e)});var myLatLongArray=[[47.6792,-122.386]],myLatLong={lat:47.6792,lng:-122.386},map,marker,infoWindow;